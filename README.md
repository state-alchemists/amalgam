# Amalgam

A case study of creating a microservices-ready/modular monolith.

In this repo, you can see:

- how to generate microservices-ready monolith
- how to run your application as a monolith
- how to split and run the same application as microservices
- how to deploy to Kubernetes (using docker-desktop)

Please see [init.sh](init.sh) for more details.

# What is a microservices-ready monolith?

Microservices-ready monolith is a monolith application that can be split and deployed as microservices.

We can create a microservices-ready monolith by using:

- Feature flags
- Interface and layered architecture

Microservices-ready monolith has all the advantages of a monolith app. One of those advantages is simplicity.

When done correctly, you can split the monolith into independent microservices. You can even rewrite some modules with different technologies/programming languages.

# How to generate everything

```bash
./init.sh
```

More than 90% of this repository was generated by using Zaruba.

You can run [init.sh](init.sh) to re-generate everything.

# How to start Fastapp

Before running the command, make sure you have Docker and Dokcer-compose installed.

```bash
zrb project start-myapp
```

This will run FastApp along with RabbitMQ/RedPanda, and Postgresql.

You can choose to run Fastapp as a monolith/microservices


# How to start Fastapp as containers

Before running the command, make sure you have Docker and Dokcer-compose installed.

```bash
zrb project start-myapp-container
```

This will run FastApp along with RabbitMQ/RedPanda, and Postgresql.

You can choose to run Fastapp as a monolith/microservices.


# How to deploy Fastapp to Kubernetes

Before running the command, make sure you have Docker and Dokcer-compose installed. Also, make sure you can access your Kubernetes cluster. The easiest way to install everything is by installing Docker Desktop

```bash
zrb project deploy-myapp
```

This will deploy FastApp along with RabbitMQ/RedPanda, and Postgresql.
